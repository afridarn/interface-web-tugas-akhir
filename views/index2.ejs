<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="../public/styles/styles.css" rel="stylesheet" type="text/css" />
    <title>Mosquito Larvae Classification</title>
    <link rel="icon" type="image/x-icon" href="../public/assets/mosquito.png" />
    <script src="https://unpkg.com/htmx.org@1.9.6" integrity="sha384-FhXw7b6AlE/jyjlZH5iHa/tTe9EpJ1Y55RjcgPbjeWMskSxZt1v9qkxLJWNJaGni" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/htmx.org/dist/ext/disable-element.js"></script>
  </head>

  <body class="max-w-full bg-indigo-100 px-2 dark:bg-indigo-900">
    <div class="flex justify-end pt-10 pr-10 animate-fade-left animate-once">
      <div class="flex-grow">
        <h1 class="sm:text-center text-2xl md:text-3xl lg:text-5xl font-semibold text-indigo-900 dark:text-indigo-100 animate-fade-down animate-once">Klasifikasi Larva Nyamuk</h1>
      </div>
      <div class="flex-none" id="toggle-dark-mode">
        <svg data-name="Layer 2" id="Layer_2" viewBox="0 0 35 35" xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 cursor-pointer stroke-indigo-900 dark:stroke-indigo-100 dark:fill-indigo-100">
          <path
            d="M18.44,34.68a18.22,18.22,0,0,1-2.94-.24,18.18,18.18,0,0,1-15-20.86A18.06,18.06,0,0,1,9.59.63,2.42,2.42,0,0,1,12.2.79a2.39,2.39,0,0,1,1,2.41L11.9,3.1l1.23.22A15.66,15.66,0,0,0,23.34,21h0a15.82,15.82,0,0,0,8.47.53A2.44,2.44,0,0,1,34.47,25,18.18,18.18,0,0,1,18.44,34.68ZM10.67,2.89a15.67,15.67,0,0,0-5,22.77A15.66,15.66,0,0,0,32.18,24a18.49,18.49,0,0,1-9.65-.64A18.18,18.18,0,0,1,10.67,2.89Z"
          />
        </svg>
      </div>
    </div>

    <!-- MAIN -->

    <!-- SECTION UPLOAD -->
    <div class="flex justify-center">
      <div class="mt-6">
        <div class="flex justify-center">
          <h6 class="text-indigo-900 mb-2 inline-block mx-auto font-semibold text-sm md:text-md lg:text-lg dark:text-indigo-100 animate-fade-down animate-once">Unggah di sini</h6>
        </div>

        <!-- BOX UNGGAH FILE -->
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-0 sm:gap-2 lg:gap-y-0 lg:gap-x-4 animate-fade-up animate-once animate-ease-in-out">
          <!-- INPUT KEPALA START HERE -->
          <div
            class="flex flex-col items-center justify-center relative transition ease-in-out border-dashed rounded-md mt-4 mb-10 border-2 px-24 py-10 xl:px-32 border-indigo-900 bg-indigo-200 hover:bg-indigo-200 hover:scale-105 dark:border-indigo-100 dark:bg-indigo-800 dark:hover:bg-indigo-700 dark:hover:border-indigo-100 cursor-pointer"
            onclick="triggerClick(`kepala`)"
            id="input-kepala"
          >
            <p class="absolute top-4 mb-4 text-center font-semibold text-xs sm:text-sm md:text-base text-indigo-900 dark:text-indigo-100">KEPALA</p>
            <p class="absolute hidden top-10 mb-6 text-center font-semibold text-xs sm:text-sm md:text-base text-indigo-900 dark:text-indigo-100" id="result-kepala"></p>
            <p class="absolute hidden top-14 mb-2 text-center font-medium text-[10px] sm:text-[12px] md:text-[14px] text-indigo-900 dark:text-indigo-100" id="score-kepala">Confidence Score = <span id="value-kepala"></span></p>

            <!-- IMAGE PREVIEW -->
            <img id="image-preview-kepala" class="hidden" src="#" alt="your image" style="max-width: 224px; height: auto" />
            <!-- ICON BELUM ADA GAMBAR -->
            <svg version="1.1" id="upload-icon-kepala" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 312.602 312.602" xml:space="preserve" class="lg:my-4 fill-indigo-900 dark:fill-indigo-100 w-20 h-20 lg:w-24 lg:h-24 mx-auto">
              <path
                d="M251.52,137.244c-3.966,0-7.889,0.38-11.738,1.134c-1.756-47.268-40.758-85.181-88.448-85.181
               c-43.856,0-80.964,32.449-87.474,75.106C28.501,129.167,0,158.201,0,193.764c0,36.106,29.374,65.48,65.48,65.48h54.782
               c4.143,0,7.5-3.357,7.5-7.5c0-4.143-3.357-7.5-7.5-7.5H65.48c-27.835,0-50.48-22.645-50.48-50.48c0-27.835,22.646-50.48,50.48-50.48
               c1.367,0,2.813,0.067,4.419,0.206l7.6,0.658l0.529-7.61c2.661-38.322,34.861-68.341,73.306-68.341
               c40.533,0,73.51,32.977,73.51,73.51c0,1.863-0.089,3.855-0.272,6.088l-0.983,11.968l11.186-4.367
               c5.356-2.091,10.99-3.151,16.747-3.151c25.409,0,46.081,20.672,46.081,46.081c0,25.408-20.672,46.08-46.081,46.08
               c-0.668,0-20.608-0.04-40.467-0.08c-19.714-0.04-39.347-0.08-39.999-0.08c-4.668,0-7.108-2.248-7.254-6.681v-80.959l8.139,9.667
               c2.667,3.17,7.399,3.576,10.567,0.907c3.169-2.667,3.575-7.398,0.907-10.567l-18.037-21.427c-2.272-2.699-5.537-4.247-8.958-4.247
               c-3.421,0-6.686,1.548-8.957,4.247l-18.037,21.427c-2.668,3.169-2.262,7.9,0.907,10.567c1.407,1.185,3.121,1.763,4.826,1.763
               c2.137,0,4.258-0.908,5.741-2.67l7.901-9.386v80.751c0,8.686,5.927,21.607,22.254,21.607c0.652,0,20.27,0.04,39.968,0.079
               c19.874,0.041,39.829,0.081,40.498,0.081c33.681,0,61.081-27.4,61.081-61.08C312.602,164.644,285.201,137.244,251.52,137.244z"
              />
            </svg>
            <p class="absolute bottom-4 text-center text-xs sm:text-sm md:text-base text-indigo-900 dark:text-indigo-100" id="keterangan-kepala">Belum ada gambar</p>

            <div class="absolute bottom-4 mt-4 flex justify-center my-5 hidden" id="button-kepala">
              <button
                class="mr-1 inline-block rounded-full border border-indigo-900 bg-indigo-900 p-3 text-white hover:bg-transparent hover:text-indigo-900 focus:outline-none focus:ring active:text-indigo-900 dark:border-white dark:bg-white dark:text-indigo-900 dark:hover:text-white dark:hover:bg-transparent dark:hover:border-white dark:active:bg-indigo-900"
                onclick="triggerClick(`kepala`)"
              >
                <svg class="h-5 w-5 rtl:rotate-180 stroke-transparent fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" stroke="currentColor">
                  <path
                    d="M14.9547098,7.98576084 L15.0711,7.99552 C15.6179,8.07328 15.9981,8.57957 15.9204,9.12636 C15.6826,10.7983 14.9218,12.3522 13.747,13.5654 C12.5721,14.7785 11.0435,15.5888 9.37999,15.8801 C7.7165,16.1714 6.00349,15.9288 4.48631,15.187 C3.77335,14.8385 3.12082,14.3881 2.5472,13.8537 L1.70711,14.6938 C1.07714,15.3238 3.55271368e-15,14.8776 3.55271368e-15,13.9867 L3.55271368e-15,9.99998 L3.98673,9.99998 C4.87763,9.99998 5.3238,11.0771 4.69383,11.7071 L3.9626,12.4383 C4.38006,12.8181 4.85153,13.1394 5.36475,13.3903 C6.50264,13.9466 7.78739,14.1285 9.03501,13.9101 C10.2826,13.6916 11.4291,13.0839 12.3102,12.174 C13.1914,11.2641 13.762,10.0988 13.9403,8.84476 C14.0181,8.29798 14.5244,7.91776 15.0711,7.99552 L14.9547098,7.98576084 Z M11.5137,0.812976 C12.2279,1.16215 12.8814,1.61349 13.4558,2.14905 L14.2929,1.31193 C14.9229,0.681961 16,1.12813 16,2.01904 L16,6.00001 L12.019,6.00001 C11.1281,6.00001 10.6819,4.92287 11.3119,4.29291 L12.0404,3.56441 C11.6222,3.18346 11.1497,2.86125 10.6353,2.60973 C9.49736,2.05342 8.21261,1.87146 6.96499,2.08994 C5.71737,2.30841 4.57089,2.91611 3.68976,3.82599 C2.80862,4.73586 2.23802,5.90125 2.05969,7.15524 C1.98193,7.70202 1.47564,8.08224 0.928858,8.00448 C0.382075,7.92672 0.00185585,7.42043 0.0796146,6.87364 C0.31739,5.20166 1.07818,3.64782 2.25303,2.43465 C3.42788,1.22148 4.95652,0.411217 6.62001,0.119916 C8.2835,-0.171384 9.99651,0.0712178 11.5137,0.812976 Z"
                  />
                </svg>
              </button>

              <button
                class="ml-1 inline-block rounded-full border border-indigo-900 p-3 text-indigo-900 hover:bg-indigo-900 hover:text-white focus:outline-none focus:ring active:bg-indigo-900 dark:border-white dark:text-white dark:hover:bg-white dark:hover:text-indigo-900"
                onclick="deleteImage(`kepala`)"
              >
                <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="3 6 5 6 21 6"></polyline>
                  <path d="M19,6 L19,20 C19,21.1045695 18.1045695,22 17,22 L7,22 C5.8954305,22 5,21.1045695 5,20 L5,6"></path>
                  <path d="M10,11 L10,17"></path>
                  <path d="M14,11 L14,17"></path>
                  <path d="M1,6 L23,6"></path>
                  <path d="M17,6 L17,4 C17,2.8954305 16.1045695,2 15,2 L9,2 C7.8954305,2 7,2.8954305 7,4 L7,6"></path>
                </svg>
              </button>
            </div>
          </div>
          <!-- INPUT KEPALA END HERE -->

          <!-- INPUT ABDOMEN START HERE -->
          <div
            class="flex flex-col items-center justify-center relative transition ease-in-out border-dashed rounded-md mt-4 mb-10 border-2 px-24 py-10 xl:px-32 border-indigo-900 bg-indigo-200 hover:bg-indigo-200 hover:scale-105 dark:border-indigo-100 dark:bg-indigo-800 dark:hover:bg-indigo-700 dark:hover:border-indigo-100 cursor-pointer"
            onclick="triggerClick(`abdomen`)"
            id="input-abdomen"
          >
            <p class="absolute top-4 mb-4 text-center font-semibold text-xs sm:text-sm md:text-base text-indigo-900 dark:text-indigo-100">ABDOMEN</p>
            <p class="absolute hidden top-10 mb-6 text-center font-semibold text-xs sm:text-sm md:text-base text-indigo-900 dark:text-indigo-100" id="result-abdomen"></p>
            <p class="absolute hidden top-14 mb-2 text-center font-medium text-[10px] sm:text-[12px] md:text-[14px] text-indigo-900 dark:text-indigo-100" id="score-abdomen">Confidence Score = <span id="value-abdomen"></span></p>

            <!-- IMAGE PREVIEW -->
            <img id="image-preview-abdomen" class="hidden" src="#" alt="your image" style="max-width: 224px; height: auto" />
            <!-- ICON BELUM ADA GAMBAR -->
            <svg version="1.1" id="upload-icon-abdomen" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 312.602 312.602" xml:space="preserve" class="lg:my-4 fill-indigo-900 dark:fill-indigo-100 w-20 h-20 lg:w-24 lg:h-24 mx-auto">
              <path
                d="M251.52,137.244c-3.966,0-7.889,0.38-11.738,1.134c-1.756-47.268-40.758-85.181-88.448-85.181
               c-43.856,0-80.964,32.449-87.474,75.106C28.501,129.167,0,158.201,0,193.764c0,36.106,29.374,65.48,65.48,65.48h54.782
               c4.143,0,7.5-3.357,7.5-7.5c0-4.143-3.357-7.5-7.5-7.5H65.48c-27.835,0-50.48-22.645-50.48-50.48c0-27.835,22.646-50.48,50.48-50.48
               c1.367,0,2.813,0.067,4.419,0.206l7.6,0.658l0.529-7.61c2.661-38.322,34.861-68.341,73.306-68.341
               c40.533,0,73.51,32.977,73.51,73.51c0,1.863-0.089,3.855-0.272,6.088l-0.983,11.968l11.186-4.367
               c5.356-2.091,10.99-3.151,16.747-3.151c25.409,0,46.081,20.672,46.081,46.081c0,25.408-20.672,46.08-46.081,46.08
               c-0.668,0-20.608-0.04-40.467-0.08c-19.714-0.04-39.347-0.08-39.999-0.08c-4.668,0-7.108-2.248-7.254-6.681v-80.959l8.139,9.667
               c2.667,3.17,7.399,3.576,10.567,0.907c3.169-2.667,3.575-7.398,0.907-10.567l-18.037-21.427c-2.272-2.699-5.537-4.247-8.958-4.247
               c-3.421,0-6.686,1.548-8.957,4.247l-18.037,21.427c-2.668,3.169-2.262,7.9,0.907,10.567c1.407,1.185,3.121,1.763,4.826,1.763
               c2.137,0,4.258-0.908,5.741-2.67l7.901-9.386v80.751c0,8.686,5.927,21.607,22.254,21.607c0.652,0,20.27,0.04,39.968,0.079
               c19.874,0.041,39.829,0.081,40.498,0.081c33.681,0,61.081-27.4,61.081-61.08C312.602,164.644,285.201,137.244,251.52,137.244z"
              />
            </svg>
            <p class="absolute bottom-4 mt-4 text-center text-xs sm:text-sm md:text-base text-indigo-900 dark:text-indigo-100" id="keterangan-abdomen">Belum ada gambar</p>

            <div class="absolute bottom-4 mt-4 flex justify-center my-5 hidden" id="button-abdomen">
              <button
                class="mr-1 inline-block rounded-full border border-indigo-900 bg-indigo-900 p-3 text-white hover:bg-transparent hover:text-indigo-900 focus:outline-none focus:ring active:text-indigo-900 dark:border-white dark:bg-white dark:text-indigo-900 dark:hover:text-white dark:hover:bg-transparent dark:hover:border-white dark:active:bg-indigo-900"
                onclick="triggerClick(`abdomen`)"
              >
                <svg class="h-5 w-5 rtl:rotate-180 stroke-transparent fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" stroke="currentColor">
                  <path
                    d="M14.9547098,7.98576084 L15.0711,7.99552 C15.6179,8.07328 15.9981,8.57957 15.9204,9.12636 C15.6826,10.7983 14.9218,12.3522 13.747,13.5654 C12.5721,14.7785 11.0435,15.5888 9.37999,15.8801 C7.7165,16.1714 6.00349,15.9288 4.48631,15.187 C3.77335,14.8385 3.12082,14.3881 2.5472,13.8537 L1.70711,14.6938 C1.07714,15.3238 3.55271368e-15,14.8776 3.55271368e-15,13.9867 L3.55271368e-15,9.99998 L3.98673,9.99998 C4.87763,9.99998 5.3238,11.0771 4.69383,11.7071 L3.9626,12.4383 C4.38006,12.8181 4.85153,13.1394 5.36475,13.3903 C6.50264,13.9466 7.78739,14.1285 9.03501,13.9101 C10.2826,13.6916 11.4291,13.0839 12.3102,12.174 C13.1914,11.2641 13.762,10.0988 13.9403,8.84476 C14.0181,8.29798 14.5244,7.91776 15.0711,7.99552 L14.9547098,7.98576084 Z M11.5137,0.812976 C12.2279,1.16215 12.8814,1.61349 13.4558,2.14905 L14.2929,1.31193 C14.9229,0.681961 16,1.12813 16,2.01904 L16,6.00001 L12.019,6.00001 C11.1281,6.00001 10.6819,4.92287 11.3119,4.29291 L12.0404,3.56441 C11.6222,3.18346 11.1497,2.86125 10.6353,2.60973 C9.49736,2.05342 8.21261,1.87146 6.96499,2.08994 C5.71737,2.30841 4.57089,2.91611 3.68976,3.82599 C2.80862,4.73586 2.23802,5.90125 2.05969,7.15524 C1.98193,7.70202 1.47564,8.08224 0.928858,8.00448 C0.382075,7.92672 0.00185585,7.42043 0.0796146,6.87364 C0.31739,5.20166 1.07818,3.64782 2.25303,2.43465 C3.42788,1.22148 4.95652,0.411217 6.62001,0.119916 C8.2835,-0.171384 9.99651,0.0712178 11.5137,0.812976 Z"
                  />
                </svg>
              </button>

              <button
                class="ml-1 inline-block rounded-full border border-indigo-900 p-3 text-indigo-900 hover:bg-indigo-900 hover:text-white focus:outline-none focus:ring active:bg-indigo-900 dark:border-white dark:text-white dark:hover:bg-white dark:hover:text-indigo-900"
                onclick="deleteImage(`abdomen`)"
              >
                <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="3 6 5 6 21 6"></polyline>
                  <path d="M19,6 L19,20 C19,21.1045695 18.1045695,22 17,22 L7,22 C5.8954305,22 5,21.1045695 5,20 L5,6"></path>
                  <path d="M10,11 L10,17"></path>
                  <path d="M14,11 L14,17"></path>
                  <path d="M1,6 L23,6"></path>
                  <path d="M17,6 L17,4 C17,2.8954305 16.1045695,2 15,2 L9,2 C7.8954305,2 7,2.8954305 7,4 L7,6"></path>
                </svg>
              </button>
            </div>
          </div>
          <!-- INPUT ABDOMEN END HERE -->
          <!-- INPUT SIPHON START HERE -->
          <div
            class="flex flex-col items-center justify-center relative transition ease-in-out border-dashed rounded-md mt-4 mb-10 border-2 px-24 py-10 xl:px-32 border-indigo-900 bg-indigo-200 hover:bg-indigo-200 hover:scale-105 dark:border-indigo-100 dark:bg-indigo-800 dark:hover:bg-indigo-700 dark:hover:border-indigo-100 cursor-pointer"
            onclick="triggerClick(`siphon`)"
            id="input-siphon"
          >
            <p class="absolute top-4 mb-4 text-center font-semibold text-xs sm:text-sm md:text-base text-indigo-900 dark:text-indigo-100">SIPHON</p>
            <p class="absolute hidden top-10 mb-6 text-center font-semibold text-xs sm:text-sm md:text-base text-indigo-900 dark:text-indigo-100" id="result-siphon"></p>
            <p class="absolute hidden top-14 mb-2 text-center font-medium text-[10px] sm:text-[12px] md:text-[14px] text-indigo-900 dark:text-indigo-100" id="score-siphon">Confidence Score = <span id="value-siphon"></span></p>

            <!-- IMAGE PREVIEW -->
            <img id="image-preview-siphon" class="hidden" src="#" alt="your image" style="max-width: 224px; height: auto" />
            <!-- ICON BELUM ADA GAMBAR -->
            <svg version="1.1" id="upload-icon-siphon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 312.602 312.602" xml:space="preserve" class="lg:my-4 fill-indigo-900 dark:fill-indigo-100 w-20 h-20 lg:w-24 lg:h-24 mx-auto">
              <path
                d="M251.52,137.244c-3.966,0-7.889,0.38-11.738,1.134c-1.756-47.268-40.758-85.181-88.448-85.181
               c-43.856,0-80.964,32.449-87.474,75.106C28.501,129.167,0,158.201,0,193.764c0,36.106,29.374,65.48,65.48,65.48h54.782
               c4.143,0,7.5-3.357,7.5-7.5c0-4.143-3.357-7.5-7.5-7.5H65.48c-27.835,0-50.48-22.645-50.48-50.48c0-27.835,22.646-50.48,50.48-50.48
               c1.367,0,2.813,0.067,4.419,0.206l7.6,0.658l0.529-7.61c2.661-38.322,34.861-68.341,73.306-68.341
               c40.533,0,73.51,32.977,73.51,73.51c0,1.863-0.089,3.855-0.272,6.088l-0.983,11.968l11.186-4.367
               c5.356-2.091,10.99-3.151,16.747-3.151c25.409,0,46.081,20.672,46.081,46.081c0,25.408-20.672,46.08-46.081,46.08
               c-0.668,0-20.608-0.04-40.467-0.08c-19.714-0.04-39.347-0.08-39.999-0.08c-4.668,0-7.108-2.248-7.254-6.681v-80.959l8.139,9.667
               c2.667,3.17,7.399,3.576,10.567,0.907c3.169-2.667,3.575-7.398,0.907-10.567l-18.037-21.427c-2.272-2.699-5.537-4.247-8.958-4.247
               c-3.421,0-6.686,1.548-8.957,4.247l-18.037,21.427c-2.668,3.169-2.262,7.9,0.907,10.567c1.407,1.185,3.121,1.763,4.826,1.763
               c2.137,0,4.258-0.908,5.741-2.67l7.901-9.386v80.751c0,8.686,5.927,21.607,22.254,21.607c0.652,0,20.27,0.04,39.968,0.079
               c19.874,0.041,39.829,0.081,40.498,0.081c33.681,0,61.081-27.4,61.081-61.08C312.602,164.644,285.201,137.244,251.52,137.244z"
              />
            </svg>
            <p class="absolute bottom-4 mt-4 text-center text-xs sm:text-sm md:text-base text-indigo-900 dark:text-indigo-100" id="keterangan-siphon">Belum ada gambar</p>

            <div class="absolute bottom-4 mt-4 flex justify-center my-5 hidden" id="button-siphon">
              <button
                class="mr-1 inline-block rounded-full border border-indigo-900 bg-indigo-900 p-3 text-white hover:bg-transparent hover:text-indigo-900 focus:outline-none focus:ring active:text-indigo-900 dark:border-white dark:bg-white dark:text-indigo-900 dark:hover:text-white dark:hover:bg-transparent dark:hover:border-white dark:active:bg-indigo-900"
                onclick="triggerClick(`siphon`)"
              >
                <svg class="h-5 w-5 rtl:rotate-180 stroke-transparent fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" stroke="currentColor">
                  <path
                    d="M14.9547098,7.98576084 L15.0711,7.99552 C15.6179,8.07328 15.9981,8.57957 15.9204,9.12636 C15.6826,10.7983 14.9218,12.3522 13.747,13.5654 C12.5721,14.7785 11.0435,15.5888 9.37999,15.8801 C7.7165,16.1714 6.00349,15.9288 4.48631,15.187 C3.77335,14.8385 3.12082,14.3881 2.5472,13.8537 L1.70711,14.6938 C1.07714,15.3238 3.55271368e-15,14.8776 3.55271368e-15,13.9867 L3.55271368e-15,9.99998 L3.98673,9.99998 C4.87763,9.99998 5.3238,11.0771 4.69383,11.7071 L3.9626,12.4383 C4.38006,12.8181 4.85153,13.1394 5.36475,13.3903 C6.50264,13.9466 7.78739,14.1285 9.03501,13.9101 C10.2826,13.6916 11.4291,13.0839 12.3102,12.174 C13.1914,11.2641 13.762,10.0988 13.9403,8.84476 C14.0181,8.29798 14.5244,7.91776 15.0711,7.99552 L14.9547098,7.98576084 Z M11.5137,0.812976 C12.2279,1.16215 12.8814,1.61349 13.4558,2.14905 L14.2929,1.31193 C14.9229,0.681961 16,1.12813 16,2.01904 L16,6.00001 L12.019,6.00001 C11.1281,6.00001 10.6819,4.92287 11.3119,4.29291 L12.0404,3.56441 C11.6222,3.18346 11.1497,2.86125 10.6353,2.60973 C9.49736,2.05342 8.21261,1.87146 6.96499,2.08994 C5.71737,2.30841 4.57089,2.91611 3.68976,3.82599 C2.80862,4.73586 2.23802,5.90125 2.05969,7.15524 C1.98193,7.70202 1.47564,8.08224 0.928858,8.00448 C0.382075,7.92672 0.00185585,7.42043 0.0796146,6.87364 C0.31739,5.20166 1.07818,3.64782 2.25303,2.43465 C3.42788,1.22148 4.95652,0.411217 6.62001,0.119916 C8.2835,-0.171384 9.99651,0.0712178 11.5137,0.812976 Z"
                  />
                </svg>
              </button>

              <button
                class="ml-1 inline-block rounded-full border border-indigo-900 p-3 text-indigo-900 hover:bg-indigo-900 hover:text-white focus:outline-none focus:ring active:bg-indigo-900 dark:border-white dark:text-white dark:hover:bg-white dark:hover:text-indigo-900"
                onclick="deleteImage(`siphon`)"
              >
                <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="3 6 5 6 21 6"></polyline>
                  <path d="M19,6 L19,20 C19,21.1045695 18.1045695,22 17,22 L7,22 C5.8954305,22 5,21.1045695 5,20 L5,6"></path>
                  <path d="M10,11 L10,17"></path>
                  <path d="M14,11 L14,17"></path>
                  <path d="M1,6 L23,6"></path>
                  <path d="M17,6 L17,4 C17,2.8954305 16.1045695,2 15,2 L9,2 C7.8954305,2 7,2.8954305 7,4 L7,6"></path>
                </svg>
              </button>
            </div>
          </div>
          <!-- INPUT SIPHON END HERE -->
          <!-- INPUT FULL BODY START HERE -->
          <div
            class="flex flex-col items-center justify-center relative transition ease-in-out border-dashed rounded-md mt-4 mb-10 border-2 px-24 py-10 xl:px-32 border-indigo-900 bg-indigo-200 hover:bg-indigo-200 hover:scale-105 dark:border-indigo-100 dark:bg-indigo-800 dark:hover:bg-indigo-700 dark:hover:border-indigo-100 cursor-pointer"
            onclick="triggerClick(`fullbody`)"
            id="input-fullbody"
          >
            <p class="absolute top-4 mb-4 text-center font-semibold text-xs sm:text-sm md:text-base text-indigo-900 dark:text-indigo-100">FULL BODY</p>
            <p class="absolute hidden top-10 mb-6 text-center font-semibold text-xs sm:text-sm md:text-base text-indigo-900 dark:text-indigo-100" id="result-fullbody"></p>
            <p class="absolute hidden top-14 mb-2 text-center font-medium text-[10px] sm:text-[12px] md:text-[14px] text-indigo-900 dark:text-indigo-100" id="score-fullbody">Confidence Score = <span id="value-fullbody"></span></p>

            <!-- IMAGE PREVIEW -->
            <img id="image-preview-fullbody" class="hidden" src="#" alt="your image" style="max-width: 224px; height: auto" />
            <!-- ICON BELUM ADA GAMBAR -->
            <svg version="1.1" id="upload-icon-fullbody" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 312.602 312.602" xml:space="preserve" class="lg:my-4 fill-indigo-900 dark:fill-indigo-100 w-20 h-20 lg:w-24 lg:h-24 mx-auto">
              <path
                d="M251.52,137.244c-3.966,0-7.889,0.38-11.738,1.134c-1.756-47.268-40.758-85.181-88.448-85.181
               c-43.856,0-80.964,32.449-87.474,75.106C28.501,129.167,0,158.201,0,193.764c0,36.106,29.374,65.48,65.48,65.48h54.782
               c4.143,0,7.5-3.357,7.5-7.5c0-4.143-3.357-7.5-7.5-7.5H65.48c-27.835,0-50.48-22.645-50.48-50.48c0-27.835,22.646-50.48,50.48-50.48
               c1.367,0,2.813,0.067,4.419,0.206l7.6,0.658l0.529-7.61c2.661-38.322,34.861-68.341,73.306-68.341
               c40.533,0,73.51,32.977,73.51,73.51c0,1.863-0.089,3.855-0.272,6.088l-0.983,11.968l11.186-4.367
               c5.356-2.091,10.99-3.151,16.747-3.151c25.409,0,46.081,20.672,46.081,46.081c0,25.408-20.672,46.08-46.081,46.08
               c-0.668,0-20.608-0.04-40.467-0.08c-19.714-0.04-39.347-0.08-39.999-0.08c-4.668,0-7.108-2.248-7.254-6.681v-80.959l8.139,9.667
               c2.667,3.17,7.399,3.576,10.567,0.907c3.169-2.667,3.575-7.398,0.907-10.567l-18.037-21.427c-2.272-2.699-5.537-4.247-8.958-4.247
               c-3.421,0-6.686,1.548-8.957,4.247l-18.037,21.427c-2.668,3.169-2.262,7.9,0.907,10.567c1.407,1.185,3.121,1.763,4.826,1.763
               c2.137,0,4.258-0.908,5.741-2.67l7.901-9.386v80.751c0,8.686,5.927,21.607,22.254,21.607c0.652,0,20.27,0.04,39.968,0.079
               c19.874,0.041,39.829,0.081,40.498,0.081c33.681,0,61.081-27.4,61.081-61.08C312.602,164.644,285.201,137.244,251.52,137.244z"
              />
            </svg>
            <p class="absolute bottom-4 mt-4 text-center text-xs sm:text-sm md:text-base text-indigo-900 dark:text-indigo-100" id="keterangan-fullbody">Belum ada gambar</p>

            <div class="absolute bottom-4 mt-4 flex justify-center my-5 hidden" id="button-fullbody">
              <button
                class="mr-1 inline-block rounded-full border border-indigo-900 bg-indigo-900 p-3 text-white hover:bg-transparent hover:text-indigo-900 focus:outline-none focus:ring active:text-indigo-900 dark:border-white dark:bg-white dark:text-indigo-900 dark:hover:text-white dark:hover:bg-transparent dark:hover:border-white dark:active:bg-indigo-900"
                onclick="triggerClick(`fullbody`)"
              >
                <svg class="h-5 w-5 rtl:rotate-180 stroke-transparent fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" stroke="currentColor">
                  <path
                    d="M14.9547098,7.98576084 L15.0711,7.99552 C15.6179,8.07328 15.9981,8.57957 15.9204,9.12636 C15.6826,10.7983 14.9218,12.3522 13.747,13.5654 C12.5721,14.7785 11.0435,15.5888 9.37999,15.8801 C7.7165,16.1714 6.00349,15.9288 4.48631,15.187 C3.77335,14.8385 3.12082,14.3881 2.5472,13.8537 L1.70711,14.6938 C1.07714,15.3238 3.55271368e-15,14.8776 3.55271368e-15,13.9867 L3.55271368e-15,9.99998 L3.98673,9.99998 C4.87763,9.99998 5.3238,11.0771 4.69383,11.7071 L3.9626,12.4383 C4.38006,12.8181 4.85153,13.1394 5.36475,13.3903 C6.50264,13.9466 7.78739,14.1285 9.03501,13.9101 C10.2826,13.6916 11.4291,13.0839 12.3102,12.174 C13.1914,11.2641 13.762,10.0988 13.9403,8.84476 C14.0181,8.29798 14.5244,7.91776 15.0711,7.99552 L14.9547098,7.98576084 Z M11.5137,0.812976 C12.2279,1.16215 12.8814,1.61349 13.4558,2.14905 L14.2929,1.31193 C14.9229,0.681961 16,1.12813 16,2.01904 L16,6.00001 L12.019,6.00001 C11.1281,6.00001 10.6819,4.92287 11.3119,4.29291 L12.0404,3.56441 C11.6222,3.18346 11.1497,2.86125 10.6353,2.60973 C9.49736,2.05342 8.21261,1.87146 6.96499,2.08994 C5.71737,2.30841 4.57089,2.91611 3.68976,3.82599 C2.80862,4.73586 2.23802,5.90125 2.05969,7.15524 C1.98193,7.70202 1.47564,8.08224 0.928858,8.00448 C0.382075,7.92672 0.00185585,7.42043 0.0796146,6.87364 C0.31739,5.20166 1.07818,3.64782 2.25303,2.43465 C3.42788,1.22148 4.95652,0.411217 6.62001,0.119916 C8.2835,-0.171384 9.99651,0.0712178 11.5137,0.812976 Z"
                  />
                </svg>
              </button>

              <button
                class="ml-1 inline-block rounded-full border border-indigo-900 p-3 text-indigo-900 hover:bg-indigo-900 hover:text-white focus:outline-none focus:ring active:bg-indigo-900 dark:border-white dark:text-white dark:hover:bg-white dark:hover:text-indigo-900"
                onclick="deleteImage(`fullbody`)"
              >
                <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="3 6 5 6 21 6"></polyline>
                  <path d="M19,6 L19,20 C19,21.1045695 18.1045695,22 17,22 L7,22 C5.8954305,22 5,21.1045695 5,20 L5,6"></path>
                  <path d="M10,11 L10,17"></path>
                  <path d="M14,11 L14,17"></path>
                  <path d="M1,6 L23,6"></path>
                  <path d="M17,6 L17,4 C17,2.8954305 16.1045695,2 15,2 L9,2 C7.8954305,2 7,2.8954305 7,4 L7,6"></path>
                </svg>
              </button>
            </div>
          </div>
          <!-- INPUT FULLBODY END HERE -->
        </div>

        <!-- BUTTON UPLOAD -->
        <div class="flex justify-center mb-10" style="display: none" id="buttons-action">
          <button
            class="hidden rounded border border-current bg-white px-8 py-3 mr-2 text-sm font-semibold text-purple-900 transition hover:scale-110 hover:shadow-xl focus:outline-none active:text-purple-700 dark:bg-purple-800 dark:text-white dark:border-none dark:active:bg-purple-600 animate-fade-right animate-once animate-duration-500"
            onclick="window.location.reload();"
            id="button-reset"
          >
            Reset
          </button>
          <form id="uploadForm" enctype="multipart/form-data">
            <input
              class="hidden relative m-0 w-full min-w-0 flex-auto rounded border border-solid border-amber-500 bg-clip-padding px-10 py-[10rem] text-base font-normal text-white transition duration-300 ease-in-out file:-mx-3 file:-my-[0.32rem] file:overflow-hidden file:rounded-none file:border-0 file:border-solid file:border-inherit file:bg-amber-400 file:px-3 file:py-[0.32rem] file:text-white file:transition file:duration-150 file:ease-in-out file:[border-inline-end-width:1px] file:[margin-inline-end:0.75rem] hover:file:bg-white hover:file:text-amber-400 focus:border-primary focus:text-amber-400 focus:shadow-te-primary focus:outline-none"
              type="file"
              onchange="readURL(this, `kepala`);"
              id="formFileKepala"
              accept="image/*;capture=camera"
              name="kepala"
            />
            <input
              class="hidden relative m-0 w-full min-w-0 flex-auto rounded border border-solid border-amber-500 bg-clip-padding px-10 py-[10rem] text-base font-normal text-white transition duration-300 ease-in-out file:-mx-3 file:-my-[0.32rem] file:overflow-hidden file:rounded-none file:border-0 file:border-solid file:border-inherit file:bg-amber-400 file:px-3 file:py-[0.32rem] file:text-white file:transition file:duration-150 file:ease-in-out file:[border-inline-end-width:1px] file:[margin-inline-end:0.75rem] hover:file:bg-white hover:file:text-amber-400 focus:border-primary focus:text-amber-400 focus:shadow-te-primary focus:outline-none"
              type="file"
              onchange="readURL(this, `abdomen`);"
              id="formFileAbdomen"
              accept="image/*;capture=camera"
              name="abdomen"
            />
            <input
              class="hidden relative m-0 w-full min-w-0 flex-auto rounded border border-solid border-amber-500 bg-clip-padding px-10 py-[10rem] text-base font-normal text-white transition duration-300 ease-in-out file:-mx-3 file:-my-[0.32rem] file:overflow-hidden file:rounded-none file:border-0 file:border-solid file:border-inherit file:bg-amber-400 file:px-3 file:py-[0.32rem] file:text-white file:transition file:duration-150 file:ease-in-out file:[border-inline-end-width:1px] file:[margin-inline-end:0.75rem] hover:file:bg-white hover:file:text-amber-400 focus:border-primary focus:text-amber-400 focus:shadow-te-primary focus:outline-none"
              type="file"
              onchange="readURL(this, `siphon`);"
              id="formFileSiphon"
              accept="image/*;capture=camera"
              name="siphon"
            />
            <input
              class="hidden relative m-0 w-full min-w-0 flex-auto rounded border border-solid border-amber-500 bg-clip-padding px-10 py-[10rem] text-base font-normal text-white transition duration-300 ease-in-out file:-mx-3 file:-my-[0.32rem] file:overflow-hidden file:rounded-none file:border-0 file:border-solid file:border-inherit file:bg-amber-400 file:px-3 file:py-[0.32rem] file:text-white file:transition file:duration-150 file:ease-in-out file:[border-inline-end-width:1px] file:[margin-inline-end:0.75rem] hover:file:bg-white hover:file:text-amber-400 focus:border-primary focus:text-amber-400 focus:shadow-te-primary focus:outline-none"
              type="file"
              onchange="readURL(this, `fullbody`);"
              id="formFileFullbody"
              accept="image/*;capture=camera"
              name="fullbody"
            />
            <button
              id="submitButton"
              class="inline-block rounded bg-indigo-900 px-8 py-3 ml-2 text-sm font-semibold text-white enabled:transition enabled:hover:scale-110 enabled:hover:shadow-xl enabled:focus:outline-none enabled:active:bg-indigo-800 dark:bg-white dark:border dark:border-current dark:text-indigo-900 enabled:dark:active:text-indigo-700 disabled:cursor-not-allowed"
            >
              <img src="../public/assets/loading.gif" id="spinner" class="my-indicator h-8 w-8" />
              Upload
            </button>
          </form>
        </div>
        <!-- SECTION HASIL -->
      </div>
    </div>

    <div class="flex justify-center">
      <div class="p-6 border w-96 border-indigo-900 rounded-xl hidden" id="section-result">
        <p class="text-indigo-900 dark:text-indigo-100 hidden" id="result-one">Sistem tidak dapat memprediksi spesies ini. Silahkan lihat hasil prediksi masing-masing organ pada setiap kotak yang tersedia.</p>
        <p class="text-indigo-900 dark:text-indigo-100 hidden" id="result-two">
          Sistem memprediksi spesies larva ini adalah <span id="species-result" class="font-semibold"></span>. Namun, harap diperhatikan pada gambar <span class="font-semibold" id="organ-differ"></span> sistem memprediksi spesies <span id="other-species" class="font-semibold"></span>
        </p>
        <p class="text-indigo-900 dark:text-indigo-100 hidden" id="result-three">Sistem memprediksi spesies larva ini adalah <span id="species-result-fix" class="font-semibold"></span>.</p>
      </div>
    </div>

    <!-- FOOTER -->
    <div class="flex justify-center">
      <p class="text-indigo-900 font-semibold text-xs my-10 dark:text-indigo-100 animate-fade-up animate-once">Made with â™¡ by Afrida</p>
    </div>

    <script>
      // dark mode
      document.querySelector("#toggle-dark-mode").addEventListener("click", () => {
        document.querySelector("html").classList.toggle("dark");
      });

      // capitalize helper
      function capitalize(string) {
        return string.charAt(0).toUpperCase() + string.slice(1);
      }

      // get elements helper
      function getElements(type) {
        return {
          container: document.getElementById(`input-${type}`),
          img: document.getElementById(`image-preview-${type}`),
          icon: document.getElementById(`upload-icon-${type}`),
          label: document.getElementById(`keterangan-${type}`),
          button: document.getElementById(`button-${type}`),
          fileInput: document.getElementById(`formFile${capitalize(type)}`),
          result: document.getElementById(`result-${type}`),
          score: document.getElementById(`score-${type}`),
          value: document.getElementById(`value-${type}`),
        };
      }

      // define elements
      const submitButton = document.getElementById("submitButton");
      const sectionResult = document.getElementById("section-result");
      const resultOne = document.getElementById("result-one");
      const resultTwo = document.getElementById("result-two");
      const resultThree = document.getElementById("result-three");

      // define image types
      const imageTypes = ["kepala", "abdomen", "siphon", "fullbody"];

      // hide element
      function hideElement(element) {
        if (!element.classList.contains("hidden")) {
          element.classList.add("hidden");
        }
        if (element.classList.contains("text-red-500")) {
          element.classList.remove("text-red-500");
        }
      }

      // hide element per result
      function hideElementPerResult() {
        hideElement(sectionResult);
        hideElement(resultOne);
        hideElement(resultTwo);
        hideElement(resultThree);
        imageTypes.forEach((type) => {
          const elements = getElements(type);
          hideElement(elements.result);
          hideElement(elements.score);
        });
      }

      // onclick show input
      function triggerClick(jenis) {
        var fileInput = document.getElementById("formFile" + capitalize(jenis));
        if (fileInput) {
          fileInput.click();
        }
      }

      // onchange show/hide button
      function updateUploadButtonVisibility() {
        const isAnyImageVisible = imageTypes.some((type) => !document.getElementById(`image-preview-${type}`).classList.contains("hidden"));
        document.getElementById("buttons-action").style.display = isAnyImageVisible ? "" : "none";
      }

      // onchange show image
      function readURL(input, type) {
        if (input.files && input.files[0]) {
          const file = input.files[0];
          const fileType = file.type.toLowerCase();

          if (fileType.startsWith("image/")) {
            const reader = new FileReader();
            reader.onload = function (e) {
              const elements = getElements(type);
              elements.img.src = e.target.result;
              elements.img.classList.remove("hidden");
              elements.img.classList.add("mt-8");
              elements.img.classList.add("mb-20");
              elements.icon.classList.add("hidden");
              elements.label.classList.add("hidden");
              elements.button.classList.remove("hidden");
              elements.container.onclick = null;
              elements.container.classList.remove("cursor-pointer");

              updateUploadButtonVisibility();
            };
            reader.readAsDataURL(file);
          } else {
            alert(`Invalid file type for ${type}. Please select an image file.`);
            input.value = "";
          }
        }
      }

      // delete image
      function deleteImage(type) {
        event.stopPropagation();
        const elements = getElements(type);
        elements.img.classList.add("hidden");
        elements.img.classList.remove("mt-10");
        elements.img.classList.remove("mb-20");
        elements.icon.classList.remove("hidden");
        elements.label.classList.remove("hidden");
        elements.button.classList.add("hidden");
        elements.img.src = "#";
        elements.fileInput.value = "";
        elements.container.onclick = () => triggerClick(type);
        elements.container.classList.add("cursor-pointer");

        updateUploadButtonVisibility();
        hideElementPerResult();
      }

      // submit form
      document.getElementById("uploadForm").addEventListener("submit", async (e) => {
        e.preventDefault();
        hideElementPerResult();

        submitButton.disabled = true;

        const formData = new FormData();
        const fileInputs = document.querySelectorAll('input[type="file"]');
        fileInputs.forEach((input) => {
          const files = input.files;
          for (let i = 0; i < files.length; i++) {
            formData.append(input.name, files[i]);
          }
        });

        try {
          const response = await fetch("/upload", {
            method: "POST",
            body: formData,
          });
          submitButton.disabled = false;
          document.getElementById("button-reset").classList.remove("hidden");
          const result = await response.json();
          sectionResult.classList.remove("hidden");

          if (result.species === "tie") {
            resultOne.classList.remove("hidden");
          } else if (result.otherSpecies) {
            resultTwo.classList.remove("hidden");
            document.getElementById("other-species").innerText = result.otherSpecies === "aedes" ? "Aedes aegypti" : "Culex quinquefasciatus";
            document.getElementById("species-result").innerText = result.species === "aedes" ? "Aedes aegypti" : "Culex quinquefasciatus";
            document.getElementById("organ-differ").innerText = result.differOrgan;
          } else {
            resultThree.classList.remove("hidden");
            document.getElementById("species-result-fix").innerText = result.species === "aedes" ? "Aedes aegypti" : "Culex quinquefasciatus";
          }

          for (let key in result.results) {
            const elements = getElements(key);
            elements.img.classList.remove("mt-8");
            elements.img.classList.add("mt-14");
            elements.result.classList.remove("hidden");
            elements.score.classList.remove("hidden");
            elements.result.innerText = result.results[key].result === "aedes" ? "Aedes aegypti" : "Culex quinquefasciatus";
            elements.value.innerText = result.results[key].score.toFixed(2);
          }

          if (result.differOrgan) {
            document.getElementById(`result-${result.differOrgan}`).classList.add("text-red-500");
            document.getElementById(`score-${result.differOrgan}`).classList.add("text-red-500");
          }
        } catch (error) {
          console.error("Error:", error);
          submitButton.disabled = false;
          document.getElementById("button-reset").classList.remove("hidden");
        }
      });
    </script>
  </body>
</html>
